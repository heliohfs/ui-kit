import { Meta, Story, Props, Source } from '@storybook/addon-docs/blocks';
import { useState } from 'react';
import { SelectUnstyled, Select } from '../..';
import { DivFlex } from '../..';
import { GROUPS } from '../../../../../.storybook/hierarchySeparators';
import { options } from './selectStoryHelper';
import { mdiPlus, mdiEye } from '@mdi/js';
import Icon from '@mdi/react';
import { IconButton } from '../..';

<Meta
  title={`${GROUPS.FORMS}/Select`}
  decorators={[story => <DivFlex>{story()}</DivFlex>]}
/>

# Select

The `Select` component can receive the following props:

<Props of={SelectUnstyled} />

# Code snippets

Here you can check the code snippet for the story.

## Auto detect

<Story name="Auto detect" parameters={{ docs: { disable: true } }}>
  {() => {
    const [value, setValue] = useState('a');
    return (
      <Select
        value={value}
        options={options}
        onChange={setValue}
        label="Placeholder"
      />
    );
  }}
</Story>

<Source id="forms-select--auto-detect" />

## No value

<Story name="No value" parameters={{ docs: { disable: true } }}>
  {() => {
    const [value, setValue] = useState([null]);
    return (
      <Select
        value={value}
        options={options}
        placeholder="select your destiny"
        menuPlacement="top"
        onChange={setValue}
        label="Placeholder"
      />
    );
  }}
</Story>

<Source id="forms-select--no-value" />

## No value multi

<Story name="No value multi" parameters={{ docs: { disable: true } }}>
  {() => {
    const [value, setValue] = useState([null]);
    return (
      <Select
        value={value}
        options={options}
        placeholder="select your destiny"
        menuPlacement="top"
        onChange={setValue}
        label="Placeholder"
        isMulti
      />
    );
  }}
</Story>

<Source id="forms-select--no-value-multi" />

## No value multi custom action

<Story
  name="No value multi custom action"
  parameters={{ docs: { disable: true } }}
>
  {() => {
    const [value, setValue] = useState([null]);
    return (
      <Select
        value={value}
        options={options}
        placeholder="select your destiny"
        menuPlacement="top"
        onChange={setValue}
        label="Placeholder"
        isMulti
        minWidth={350}
        customAction={{
          buttonLabel: 'Nova ação',
          handleClick: () => console.log('Custom Action Click'),
          buttonIcon: mdiPlus,
        }}
      />
    );
  }}
</Story>

<Source id="forms-select--no-value-multi-custom-action" />

## No value multi custom indicators

<Story
  name="No value multi custom indicators"
  parameters={{ docs: { disable: true } }}
>
  {() => {
    const [value, setValue] = useState([null]);
    return (
      <Select
        value={value}
        options={options}
        placeholder="select your destiny"
        menuPlacement="top"
        onChange={setValue}
        label="Placeholder"
        isMulti
        minWidth={350}
        error="Example error message"
        customIndicators={
          <IconButton onClick={() => console.log('Indicator Click')}>
            <Icon path={mdiEye} size={1} color="grey" />
          </IconButton>
        }
      />
    );
  }}
</Story>

<Source id="forms-select--no-value-multi-custom-indicators" />

## Web

<Story name="Web" parameters={{ docs: { disable: true } }}>
  {() => {
    const [value, setValue] = useState('a');
    return (
      <Select
        value={value}
        options={options}
        onChange={setValue}
        label="Placeholder"
        variant="web"
      />
    );
  }}
</Story>

<Source id="forms-select--web" />

## Mobile

<Story name="Mobile" parameters={{ docs: { disable: true } }}>
  {() => {
    const [value, setValue] = useState('a');
    return (
      <Select
        value={value}
        options={options}
        onChange={setValue}
        label="Placeholder"
        variant="mobile"
      />
    );
  }}
</Story>

<Source id="forms-select--mobile" />

## Web multi

<Story name="Web multi" parameters={{ docs: { disable: true } }}>
  {() => {
    const [value, setValue] = useState('a');
    return (
      <Select
        value={value}
        options={options}
        onChange={setValue}
        label="Placeholder"
        variant="web"
        isMulti
      />
    );
  }}
</Story>

<Source id="forms-select--web-multi" />

## Mobile multi

<Story name="Mobile multi" parameters={{ docs: { disable: true } }}>
  {() => {
    const [value, setValue] = useState('a');
    return (
      <Select
        value={value}
        options={options}
        onChange={setValue}
        label="Placeholder"
        variant="mobile"
        isMulti
      />
    );
  }}
</Story>

<Source id="forms-select--mobile-multi" />

## Multi fullscreen auto-size not allowed select all

<Story
  name="Multi fullscreen auto-size not allowed select all"
  parameters={{ docs: { disable: true } }}
>
  {() => {
    const [value, setValue] = useState('a');
    return (
      <Select
        value={value}
        options={options}
        onChange={setValue}
        label="Placeholder"
        variant="web"
        isMulti
        allowSelectAll={false}
      />
    );
  }}
</Story>

<Source id="forms-select--multi-fullscreen-auto-size-not-allowed-select-all" />

## Show auto

<Story name="Show auto" parameters={{ docs: { disable: true } }}>
  {() => {
    const [multiValue, setMultiValue] = useState(['a', 'b', 'c']);
    return (
      <div
        style={{
          display: 'flex',
          flexDirection: 'column',
          overflow: 'hide',
          alignItems: 'center',
          width: '100%',
        }}
      >
        <div
          style={{
            minHeight: '40vh',
          }}
        />
        <Select
          value={multiValue}
          options={options}
          onChange={setMultiValue}
          label="Placeholder"
          isMulti
          menuPlacement="auto"
          variant="web"
        />
        <div
          style={{
            minHeight: '40vh',
          }}
        />
      </div>
    );
  }}
</Story>

<Source id="forms-select--show-auto" />
