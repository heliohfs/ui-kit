import { Meta, Story, ArgsTable as Props, Source } from '@storybook/addon-docs/blocks';
import { useState } from 'react';
import { GROUPS } from 'hierarchySeparators';
import { GroupedInput } from 'components/GroupedInput';

<Meta
  title={`${GROUPS.FORMS}/Grouped Input`}
/>

# Grouped Input

The `GroupedInput` component can receive the following props:

<Props of={GroupedInput} />

# Code snippets

Here you can check the code snippet for the story.

## Grouped input

<Story name="Grouped input" parameters={{ docs: { disable: true } }}>
  {() => {
     const [values, setValues] = useState(['123', '456']);
     return (
       <GroupedInput
         name="telefones"
         label="Telefone"
         header="Telefones"
         values={values}
         onChange={(value, index) => {
           setValues(v => {
             const newArray = [...v];
             newArray[index] = value;
             return newArray;
           });
         }}
         remove={index => {
           setValues(v => {
             const newArray = [...v];
             newArray.splice(index, 1);
             return newArray;
           });
         }}
         push={() => setValues(v => ['',  ...v])}
         hr
       />
     );
   }}
</Story>

<Source id="forms-grouped-input--grouped-input" />

## Empty

<Story name="Empty" parameters={{ docs: { disable: true } }}>
  {() => {
     const [values, setValues] = useState([]);
     return (
       <GroupedInput
         name="telefones"
         label="Telefone"
         header="Telefones"
         values={values}
         onChange={(value, index) => {
                setValues(v => {
                const newArray = [...v];
                newArray[index] = value;
                return newArray;
            });
         }}
         remove={index => {
           setValues(v => {
             const newArray = [...v];
             newArray.splice(index, 1);
             return newArray;
           });
         }}
         push={() => setValues(v => ['',  ...v])}
         hr
       />
     );
   }}
</Story>

<Source id="forms-grouped-input--empty" />

## Error

<Story name="Error" parameters={{ docs: { disable: true } }}>
  {() => {
     const [values, setValues] = useState([]);
     return (
       <GroupedInput
         name="telefones"
         label="Telefone"
         header="Telefones"
         error="Não deve estar vazio"
         values={values}
         onChange={(value, index) => {
           setValues(v => {
             const newArray = v;
             newArray[index] = value;
             return newArray;
           });
         }}
         remove={index => {
           setValues(v => {
             const newArray = [...v];
             newArray.splice(index, 1);
             return newArray;
           });
         }}
         push={() => setValues(v => [...v, ''])}
         hr
       />
     );
   }}
</Story>

<Source id="forms-grouped-input--error" />

## Input Without List

<Story name="Input Without List" parameters={{ docs: { disable: true } }}>
  {() => {
     const [values, setValues] = useState([]);
     return (
       <GroupedInput
         inputType="outside"
         name="telefones"
         label="Telefone"
         header="Telefones"
         error="Não deve estar vazio"
         values={values}
         onChange={(value, index) => {
           setValues(v => {
             const newArray = [...v];
             newArray[index] = value;
             return newArray;
           });
         }}
         remove={index => {
           setValues(v => {
             const newArray = [...v];
             newArray.splice(index, 1);
             return newArray;
           });
         }}
         push={() => setValues(v => [...v, ''])}
       />
     );
   }}
</Story>

<Source id="forms-grouped-input--input-without-list" />

## Add new elements

<Story name="Add new elements" parameters={{ docs: { disable: true } }}>
  {() => {
     const [values, setValues] = useState([]);
     return (
       <GroupedInput
         inputType="inside"
         name="telefones"
         label="Telefone"
         header="Telefones"
         values={values}
         onChange={(value, index) => {
           console.log(value)
           console.log(index)
           setValues(v => {
             const newArray = [...v];
             newArray[index] = value;
             return newArray;
           });
         }}
         remove={index => {
           setValues(v => {
             const newArray = [...v];
             newArray.splice(index, 1);
             return newArray;
           });
         }}
         push={() => setValues(v => [...v, ''])}
       />
     );
   }}
</Story>

<Source id="forms-grouped-input--add-new-elements" />

